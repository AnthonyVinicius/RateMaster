import{_ as L,D as P,r as p,j as A,c as n,a as t,n as F,d as f,e as R,t as N,u as r,A as T,k as y,v as w,b as l,w as u,o as d,F as _,B as $,m as h,E as x,p as j,q as z,C as S,f as G,g as O,G as H,h as J}from"./index-gYmHc71o.js";const K={class:"bg-light min-vh-100 py-5"},Q={class:"container"},W={key:0,class:"bi bi-check-circle-fill"},X={key:1,class:"bi bi-exclamation-triangle-fill"},Y={key:2,class:"bi bi-x-circle-fill"},Z={class:"row g-4"},ee={class:"col-12 col-lg-5"},te={class:"card border-0 shadow-sm"},se={class:"card-body p-4"},oe={key:0,class:"text-center text-secondary"},le=["src"],ae={class:"form-floating"},ie={class:"col-12 col-lg-7"},re={class:"card border-0 shadow-sm"},ne={class:"card-body p-4"},de={class:"form-floating mb-3"},ue={class:"form-floating mb-3"},ce={class:"row g-3 mb-3"},me={class:"col-md-6"},pe={class:"col-md-6"},ve={class:"form-floating"},ge={class:"mb-4"},be={class:"d-flex gap-2"},fe={class:"form-floating flex-grow-1"},ye=["value"],_e={__name:"RegisterProductView",setup(he){const M=O(),U=new P("products"),B=new P("brands"),D=H("userData"),s=p({idShop:"",name:"",description:"",brand:"",price:"",type:"",image:""}),V=p([]),k=p(null),m=p("success"),v=p(!1),C=(g,e="success")=>{k.value=g,m.value=e,v.value=!0,setTimeout(()=>v.value=!1,3e3)},q=async()=>{V.value=await B.getAll()};A(()=>{q()});const E=async()=>{s.value.idShop=D.value.id,s.value.name=s.value.name.trim(),s.value.description=s.value.description.trim(),s.value.price=s.value.price.trim(),s.value.brand=s.value.brand.trim(),s.value.type=s.value.type.trim(),await U.insert(s.value),C("Produto registrado com sucesso!","success"),s.value={idShop:"",name:"",description:"",brand:"",price:"",type:"",image:""}},I=g=>{let e=g.target.value.replace(/\D/g,"");const b=Number(e)/100;s.value.price=b?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(b):""};return(g,e)=>{const b=J("RouterLink");return d(),n("div",K,[t("div",Q,[v.value?(d(),n("div",{key:0,class:F(`alert alert-${m.value} alert-dismissible fade show custom-alert`),role:"alert"},[m.value==="success"?(d(),n("i",W)):f("",!0),m.value==="warning"?(d(),n("i",X)):f("",!0),m.value==="danger"?(d(),n("i",Y)):f("",!0),R(" "+N(k.value)+" ",1),t("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=o=>v.value=!1)})],2)):f("",!0),t("button",{type:"button",class:"btn pb-3 back-button",onClick:e[1]||(e[1]=o=>r(M).push("/myProfile"))}," ← Voltar para os produtos "),t("div",Z,[t("div",ee,[t("div",te,[t("div",se,[e[10]||(e[10]=t("h5",{class:"card-title mb-4"},"Imagem do Produto",-1)),t("div",{class:"image-preview rounded bg-light mb-3 d-flex align-items-center justify-content-center",style:T({backgroundImage:s.value.image?`url(${s.value.image})`:"none"})},[s.value.image?(d(),n("img",{key:1,src:s.value.image,alt:"Product preview",class:"img-fluid rounded"},null,8,le)):(d(),n("div",oe,e[8]||(e[8]=[t("i",{class:"bi bi-image fs-1"},null,-1),t("p",{class:"mt-2 mb-0"},"Pré-visualização",-1)])))],4),t("div",ae,[y(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>s.value.image=o),type:"text",class:"form-control",id:"imageUrl",placeholder:"Enter image URL"},null,512),[[w,s.value.image]]),e[9]||(e[9]=t("label",{for:"imageUrl"},"Image URL",-1))])])])]),t("div",ie,[t("div",re,[t("div",ne,[e[19]||(e[19]=t("h5",{class:"card-title mb-4"},"Registrar Produto",-1)),l(r(G),{onSubmit:E},{default:u(()=>[t("div",de,[l(r(_),{id:"productName",name:"productName",type:"text",rules:"required|min:5|max:100"},{default:u(({field:o,errors:a,meta:i})=>[y(t("input",h({"onUpdate:modelValue":e[3]||(e[3]=c=>s.value.name=c)},o,{class:{"form-control":!0,"is-valid":i.touched&&!a.length,"is-invalid":i.touched&&a.length},placeholder:"Enter product name"}),null,16),[[$,s.value.name]])]),_:1}),l(r(x),{name:"productName",class:"errorMessage"}),e[11]||(e[11]=t("label",{for:"productName"},"Nome do Produto",-1))]),t("div",ue,[l(r(_),{id:"description",name:"description",type:"text",rules:"required|min:5|max:300"},{default:u(({field:o,errors:a,meta:i})=>[y(t("textarea",h({"onUpdate:modelValue":e[4]||(e[4]=c=>s.value.description=c)},o,{class:{"form-control":!0,"is-valid":i.touched&&!a.length,"is-invalid":i.touched&&a.length},placeholder:"Enter product description",style:{height:"100px"}}),"                  ",16),[[w,s.value.description]])]),_:1}),l(r(x),{name:"description",class:"errorMessage"}),e[12]||(e[12]=t("label",{for:"description"},"Descrição",-1))]),t("div",ce,[t("div",me,[y(t("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>s.value.price=o),type:"text",class:"form-control p-3",placeholder:"R$ 0,00",required:"",onInput:I},null,544),[[w,s.value.price]])]),t("div",pe,[t("div",ve,[l(r(_),{modelValue:s.value.type,"onUpdate:modelValue":e[6]||(e[6]=o=>s.value.type=o),name:"type",id:"type",rules:"required"},{default:u(({field:o,errors:a,meta:i})=>[t("select",h(o,{class:{"form-control":!0,"is-valid":i.touched&&!a.length,"is-invalid":i.touched&&a.length}}),e[13]||(e[13]=[t("option",{value:""},"Selecione o tipo",-1),t("option",{value:"Product"},"Produto",-1),t("option",{value:"Service"},"Serviço",-1)]),16),e[14]||(e[14]=t("label",{for:"type"},"Tipo",-1))]),_:1},8,["modelValue"]),l(r(x),{name:"type",class:"errorMessage"})])])]),t("div",ge,[t("div",be,[t("div",fe,[l(r(_),{modelValue:s.value.brand,"onUpdate:modelValue":e[7]||(e[7]=o=>s.value.brand=o),name:"brand",id:"brand",rules:"required"},{default:u(({field:o,errors:a,meta:i})=>[t("select",h(o,{class:{"form-control":!0,"is-valid":i.touched&&!a.length,"is-invalid":i.touched&&a.length}}),[e[15]||(e[15]=t("option",{value:""},"Selecione a marca",-1)),(d(!0),n(j,null,z(V.value,c=>(d(),n("option",{key:c.id,value:c.id},N(c.name),9,ye))),128))],16)]),_:1},8,["modelValue"]),l(r(x),{name:"brand",class:"errorMessage"}),e[16]||(e[16]=t("label",{for:"brand"},"Marca",-1))]),l(b,{to:"/brand",class:"d-flex align-items-center"},{default:u(()=>[l(S,null,{default:u(()=>e[17]||(e[17]=[t("i",{class:"bi bi-plus-lg"},null,-1)])),_:1})]),_:1})])]),l(S,{class:"button container-fluid py-3"},{default:u(()=>e[18]||(e[18]=[R(" Registrar Produto ")])),_:1})]),_:1})])])])])])])}}},we=L(_e,[["__scopeId","data-v-9f8233c7"]]);export{we as default};
