import{_ as L,r as g,D as k,j as T,c as a,a as o,n as q,d as y,e as V,t as U,u as n,A as F,k as d,v as h,b as i,w as u,o as r,F as S,B as j,m as D,E as N,s as C,p as H,q as O,C as R,f as G,H as J,g as K,h as Q}from"./index-gYmHc71o.js";const W={class:"bg-light min-vh-100 py-5"},X={class:"container"},Y={key:0,class:"bi bi-check-circle-fill me-2"},Z={key:1,class:"bi bi-exclamation-triangle-fill me-2"},ee={key:2,class:"bi bi-x-circle-fill me-2"},oe={class:"row g-4"},te={class:"col-12 col-lg-5"},se={class:"card border-0 shadow-sm"},le={class:"card-body p-4"},ae={key:0,class:"text-center text-secondary"},re=["src"],ie={class:"form-floating"},ne={class:"col-12 col-lg-7"},de={class:"card border-0 shadow-sm"},ue={class:"card-body p-4"},ce={class:"form-floating mb-3"},me={class:"form-floating mb-3"},pe={class:"row g-3 mb-3"},ve={class:"col-md-6"},ge={class:"form-floating"},fe={class:"col-md-6"},be={class:"form-floating"},ye={class:"mb-4"},_e={class:"d-flex gap-2"},he={class:"form-floating flex-grow-1"},we=["value"],xe={__name:"UpdateProductsView",setup(Pe){const B=J(),f=K(),w=g(null),c=g("success"),b=g(!1),x=new k("products"),E=new k("brands"),P=g([]),t=g({name:"",description:"",brand:"",price:"",type:"",image:null}),M=async()=>{P.value=await E.getAll()},m=(l,e="success")=>{w.value=l,c.value=e,b.value=!0,setTimeout(()=>b.value=!1,3e3)},A=async()=>{const l=B.params.id;if(!l){m("Produto não encontrado!","warning"),f.push({name:"listProducts"});return}try{const e=await x.get(l);t.value={...e}}catch(e){console.error(e),m("Erro ao carregar o produto.","danger"),f.push({name:"listProducts"})}},I=async()=>{if(!t.value.name||!t.value.description||!t.value.price||!t.value.brand||!t.value.type){m("Por favor, preencha todos os campos obrigatórios!","warning");return}try{await x.update(t.value.id,t.value),m("Produto atualizado com sucesso!","success"),f.push("/myProfile")}catch(l){console.error(l),m("Erro ao atualizar o produto.","danger")}},$=l=>{let e=l.target.value.replace(/\D/g,"");e.length>2&&(e=e.slice(0,e.length-2)+","+e.slice(e.length-2)),t.value.price=e?"R$ "+e:""};return T(()=>{M(),A()}),(l,e)=>{const z=Q("RouterLink");return r(),a("div",W,[o("div",X,[b.value?(r(),a("div",{key:0,class:q(`alert alert-${c.value} alert-dismissible fade show`),role:"alert"},[c.value==="success"?(r(),a("i",Y)):y("",!0),c.value==="warning"?(r(),a("i",Z)):y("",!0),c.value==="danger"?(r(),a("i",ee)):y("",!0),V(" "+U(w.value)+" ",1),o("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=s=>b.value=!1)})],2)):y("",!0),o("button",{type:"button",class:"btn pb-3 back-button",onClick:e[1]||(e[1]=s=>n(f).push("/myProfile"))}," ← Voltar para os produtos "),o("div",oe,[o("div",te,[o("div",se,[o("div",le,[e[10]||(e[10]=o("h5",{class:"card-title mb-4"},"Imagem do Produto",-1)),o("div",{class:"image-preview rounded bg-light mb-3 d-flex align-items-center justify-content-center",style:F({backgroundImage:t.value.image?`url(${t.value.image})`:"none"})},[t.value.image?(r(),a("img",{key:1,src:t.value.image,alt:"Product preview",class:"img-fluid rounded"},null,8,re)):(r(),a("div",ae,e[8]||(e[8]=[o("i",{class:"bi bi-image fs-1"},null,-1),o("p",{class:"mt-2 mb-0"},"Pré-visualização",-1)])))],4),o("div",ie,[d(o("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>t.value.image=s),type:"text",class:"form-control",id:"imageUrl",placeholder:"Enter image URL"},null,512),[[h,t.value.image]]),e[9]||(e[9]=o("label",{for:"imageUrl"},"URL da Imagem",-1))])])])]),o("div",ne,[o("div",de,[o("div",ue,[e[20]||(e[20]=o("h5",{class:"card-title mb-4"},"Editar Produto",-1)),i(n(G),{onSubmit:I},{default:u(()=>[o("div",ce,[i(n(S),{id:"productName",name:"productName",type:"text",rules:"required|min:5|max:100"},{default:u(({field:s,errors:p,meta:v})=>[d(o("input",D({"onUpdate:modelValue":e[3]||(e[3]=_=>t.value.name=_)},s,{class:{"form-control":!0,"is-valid":v.touched&&!p.length,"is-invalid":v.touched&&p.length},placeholder:"Digite o nome do produto"}),null,16),[[j,t.value.name]])]),_:1}),i(n(N),{name:"productName",class:"invalid-feedback"}),e[11]||(e[11]=o("label",{for:"productName"},"Nome do Produto",-1))]),o("div",me,[i(n(S),{id:"description",name:"description",type:"text",rules:"required|min:5|max:300"},{default:u(({field:s,errors:p,meta:v})=>[d(o("textarea",D({"onUpdate:modelValue":e[4]||(e[4]=_=>t.value.description=_)},s,{class:{"form-control":!0,"is-valid":v.touched&&!p.length,"is-invalid":v.touched&&p.length},placeholder:"Digite a descrição do produto",style:{height:"100px"}}),null,16),[[h,t.value.description]])]),_:1}),i(n(N),{name:"description",class:"invalid-feedback"}),e[12]||(e[12]=o("label",{for:"description"},"Descrição",-1))]),o("div",pe,[o("div",ve,[o("div",ge,[d(o("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>t.value.price=s),type:"text",class:"form-control",placeholder:"R$ 0,00",required:"",onInput:$},null,544),[[h,t.value.price]]),e[13]||(e[13]=o("label",null,"Preço",-1))])]),o("div",fe,[o("div",be,[d(o("select",{"onUpdate:modelValue":e[6]||(e[6]=s=>t.value.type=s),class:"form-control"},e[14]||(e[14]=[o("option",{value:""},"Selecione o tipo",-1),o("option",{value:"Produto"},"Produto",-1),o("option",{value:"Serviço"},"Serviço",-1)]),512),[[C,t.value.type]]),e[15]||(e[15]=o("label",null,"Tipo",-1))])])]),o("div",ye,[o("div",_e,[o("div",he,[d(o("select",{"onUpdate:modelValue":e[7]||(e[7]=s=>t.value.brand=s),class:"form-control"},[e[16]||(e[16]=o("option",{value:""},"Selecione a marca",-1)),(r(!0),a(H,null,O(P.value,s=>(r(),a("option",{key:s.id,value:s.id},U(s.name),9,we))),128))],512),[[C,t.value.brand]]),e[17]||(e[17]=o("label",null,"Marca",-1))]),i(z,{to:"/brand",class:"d-flex align-items-center"},{default:u(()=>[i(R,null,{default:u(()=>e[18]||(e[18]=[o("i",{class:"bi bi-plus-lg"},null,-1)])),_:1})]),_:1})])]),i(R,{class:"button container-fluid py-3"},{default:u(()=>e[19]||(e[19]=[V(" Salvar Alterações ")])),_:1})]),_:1})])])])])])])}}},Ve=L(xe,[["__scopeId","data-v-125cdbcf"]]);export{Ve as default};
