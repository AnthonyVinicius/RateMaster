import{_ as N,D as b,r as v,i as A,j as F,c as n,a as e,k as m,v as L,e as d,l as g,p as f,q as h,o as i,t as p,g as S}from"./index-gYmHc71o.js";const U={class:"container-fluid pe-5 ps-5"},E={class:"d-flex flex-column mt-4 mb-4"},I={class:"form-floating search-bar container search-container"},M={class:"row d-flex mt-5"},q={class:"col-md-2"},B={class:"bg-white p-4 pb-5 rounded-3 shadow-sm"},T={class:"hstack mb-4"},j={class:"vstack mb-3 filter-section checkbox"},z={class:"filter-section"},O={class:"vstack"},Q=["value"],G={class:"star"},H={class:"mb-5 col-md-10"},J={class:"row row-cols-1 row-cols-md-5 g-4"},K=["onClick"],W={class:"card rounded-3 text-truncate"},X={class:"d-flex justify-content-center align-items-center img-container"},Y=["src","alt"],Z={class:"card-body"},ee={class:"vstack gap-3"},se={class:"hstack"},te={class:"fw-bold text-truncate m-0"},ae={class:"ms-auto me-2 star"},le={class:"card-text text-truncate"},oe={class:"hstack d-flex align-items-center"},ne={class:"price m-0 text-truncate"},ie={class:"card-text ms-auto text-truncate"},re={__name:"ProductReviewsView",setup(ce){const k=new b("products"),y=new b("reviews"),R=new b("shop"),P=S(),_=v([]),l=v({price:[],rating:[]}),x=v([]),w=v([]),u=v(""),C=async()=>{try{_.value=await k.getAll(),w.value=await R.getAll(),x.value=await y.getAll(),_.value.forEach(a=>{const s=x.value.filter(r=>r.productId===a.id),t=s.reduce((r,c)=>r+c.rating,0),o=w.value.find(r=>r.id===a.idShop);a.companyName=o?o.name:"Empresa desconhecida",s.length>0?a.averageRating=(t/s.length).toFixed(1):a.averageRating=0})}catch(a){console.error("Erro ao carregar produtos:",a)}},V=a=>{if(!a)return 0;let s=a.replace(/[^\d,]/g,"").replace(",",".");return parseFloat(s)||0},D=A(()=>_.value.filter(a=>{const s=!u.value||a.name.toLowerCase().includes(u.value.toLowerCase())||a.companyName.toLowerCase().includes(u.value.toLowerCase()),t=V(a.price),o=l.value.price.length===0||l.value.price.some(c=>c==="0-50"?t>=0&&t<=50:c==="51-100"?t>=51&&t<=100:c==="101+"?t>=101:!1),r=l.value.rating.length===0||l.value.rating.some(c=>parseFloat(c)===Math.floor(a.averageRating));return o&&r&&s})),$=a=>{P.push({name:"productDetail",params:{id:a}})};return F(()=>{C()}),(a,s)=>(i(),n("div",U,[e("div",E,[s[7]||(s[7]=e("h1",{class:"header ms-auto me-auto align-items-center"},"Descubra nossos Produtos",-1)),e("div",I,[m(e("input",{type:"search","onUpdate:modelValue":s[0]||(s[0]=t=>u.value=t),class:"form-control",id:"floatingInput",placeholder:"Procurar produto..."},null,512),[[L,u.value]]),s[6]||(s[6]=e("label",{class:"ms-3",for:"floatingInput"},[e("i",{class:"bi bi-search"}),d(" Procurar produto...")],-1))])]),e("div",M,[e("section",q,[e("aside",B,[e("div",T,[s[8]||(s[8]=e("h6",{class:"filter-text m-0 p-0"},"Filtros",-1)),e("button",{class:"btn ms-auto clear-filters rounded-pill",onClick:s[1]||(s[1]=t=>l.value={price:[],rating:[]})}," Clear All ")]),s[13]||(s[13]=e("h6",{class:"filter-text"},"PreÃ§o",-1)),e("div",j,[e("label",null,[m(e("input",{type:"checkbox","onUpdate:modelValue":s[2]||(s[2]=t=>l.value.price=t),value:"0-50"},null,512),[[g,l.value.price]]),s[9]||(s[9]=d(" R$0 - R$50"))]),e("label",null,[m(e("input",{type:"checkbox","onUpdate:modelValue":s[3]||(s[3]=t=>l.value.price=t),value:"51-100"},null,512),[[g,l.value.price]]),s[10]||(s[10]=d(" R$51 - R$100"))]),e("label",null,[m(e("input",{type:"checkbox","onUpdate:modelValue":s[4]||(s[4]=t=>l.value.price=t),value:"101+"},null,512),[[g,l.value.price]]),s[11]||(s[11]=d(" R$101+"))])]),e("div",z,[e("div",O,[s[12]||(s[12]=e("h3",{class:"filter-text"},"Nota",-1)),(i(),n(f,null,h(5,t=>e("label",{class:"mb-2",key:t},[m(e("input",{class:"checkbox",type:"checkbox","onUpdate:modelValue":s[5]||(s[5]=o=>l.value.rating=o),value:6-t},null,8,Q),[[g,l.value.rating]]),e("span",G,[(i(!0),n(f,null,h(6-t,o=>(i(),n("i",{class:"bi bi-star-fill ms-1",key:o}))),128)),(i(!0),n(f,null,h(t-1,o=>(i(),n("i",{class:"bi bi-star ms-1",key:o+"empty"}))),128))])])),64))])])])]),e("div",H,[e("div",J,[(i(!0),n(f,null,h(D.value,t=>(i(),n("div",{class:"col",key:t.id,onClick:o=>$(t.id)},[e("div",W,[e("div",X,[e("img",{class:"img-fluid product-img",src:t.image,alt:t.name},null,8,Y)]),e("div",Z,[e("div",ee,[e("div",se,[e("h6",te,p(t.name),1),e("div",ae,[s[14]||(s[14]=e("span",{class:"star"},[e("i",{class:"bi bi-star-fill"})],-1)),d(" "+p(t.averageRating),1)])]),e("p",le,p(t.description),1),e("div",oe,[e("p",ne,p(t.price),1),e("p",ie,[s[15]||(s[15]=e("strong",null,null,-1)),d(" "+p(t.companyName),1)])])])])])],8,K))),128))])])])]))}},ue=N(re,[["__scopeId","data-v-c7dc7da3"]]);export{ue as default};
